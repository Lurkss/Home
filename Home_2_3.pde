import processing.serial.*;
import spout.*;


color[] c1 = {#F26D9E, #BF65A7, #6CD9CE, #E89D43, #736559, #000000};
color[] c2 = {#52656B, #FF3B77, #CDFF00, #FFFFFF, #B8B89F, #000000};
color[] palette = c2;

int rawData[][] = {  {1, 121, 74, 47, 18, 69, 30, 4}, //North-East = Louth, Monaghan, Cavan
  {2, 41, 32, 9, 7, 22, 12, 0}, //North-West = Donegal, Leitrim, Sligo
  {3, 66, 35, 31, 16, 38, 11, 1}, //Midlands = Laois, Longford, Offaly, Westmeath
  {4, 205, 144, 61, 35, 106, 62, 2}, //West = Galway, Mayo, Roscommon
  {5, 3247, 1766, 1481, 559, 2027, 615, 46}, //Dublin
  {6, 211, 120, 91, 31, 131, 41, 8}, //Mid-East = Kildare, Meath, Wicklow
  {7, 281, 187, 94, 41, 156, 74, 10}, //Mid-West = Clare, Limerick
  {8, 276, 188, 88, 49, 150, 65, 12}, //South-East = Carlow, Kilkenny, Tipperary, Waterford, Wexford
  {9, 312, 217, 95, 33, 195, 77, 7}, //South-West = Cork, Kerry

  {1, 105, 67, 38, 8, 66, 28, 3}, 
  {2, 44, 33, 11, 7, 21, 15, 1}, 
  {3, 67, 31, 36, 16, 40, 10, 1}, 
  {4, 198, 134, 64, 35, 94, 67, 2}, 
  {5, 3310, 1791, 1519, 550, 2080, 634, 46}, 
  {6, 227, 127, 100, 32, 138, 48, 9}, 
  {7, 301, 192, 109, 41, 177, 75, 8}, 
  {8, 282, 194, 88, 47, 157, 64, 14}, 
  {9, 341, 228, 113, 40, 212, 83, 6}, 

  {1, 73, 53, 20, 16, 37, 15, 5}, 
  {2, 40, 31, 9, 3, 22, 14, 1}, 
  {3, 55, 29, 26, 11, 26, 18, 0}, 
  {4, 139, 98, 41, 10, 75, 50, 4}, 
  {5, 2750, 1510, 1240, 461, 1733, 513, 43}, 
  {6, 202, 132, 70, 30, 117, 43, 12}, 
  {7, 212, 144, 68, 31, 126, 45, 10}, 
  {8, 259, 186, 73, 60, 120, 70, 9}, 
  {9, 239, 169, 70, 20, 144, 72, 3}, 

  {1, 151, 87, 64, 19, 100, 28, 4}, 
  {2, 52, 36, 16, 6, 24, 21, 1}, 
  {3, 78, 36, 42, 18, 52, 7, 1}, 
  {4, 182, 113, 69, 32, 85, 62, 3}, 
  {5, 3337, 1785, 1552, 548, 2098, 645, 46}, 
  {6, 234, 134, 100, 35, 140, 50, 9}, 
  {7, 324, 189, 135, 45, 202, 71, 6}, 
  {8, 282, 195, 87, 53, 153, 66, 10}, 
  {9, 332, 218, 114, 37, 210, 77, 8}, 

  {1, 126, 80, 46, 16, 82, 25, 3}, 
  {2, 44, 35, 9, 3, 25, 16, 0}, 
  {3, 79, 39, 40, 15, 54, 10, 0}, 
  {4, 191, 125, 66, 28, 90, 69, 4}, 
  {5, 3327, 1779, 1548, 550, 2075, 652, 50}, 
  {6, 236, 138, 98, 38, 139, 50, 9}, 
  {7, 323, 186, 137, 44, 201, 71, 7}, 
  {8, 281, 189, 92, 49, 152, 70, 10}, 
  {9, 315, 201, 114, 37, 191, 78, 9}, 

  {1, 115, 70, 45, 11, 77, 23, 4}, 
  {2, 56, 47, 9, 6, 34, 16, 0}, 
  {3, 82, 36, 46, 21, 49, 11, 1}, 
  {4, 208, 132, 76, 30, 100, 74, 4}, 
  {5, 3406, 1833, 1573, 573, 2111, 674, 48}, 
  {6, 251, 144, 107, 36, 148, 53, 14}, 
  {7, 317, 185, 132, 42, 196, 72, 7}, 
  {8, 298, 200, 98, 49, 165, 73, 11}, 
  {9, 313, 203, 110, 34, 190, 81, 8}, 

  {1, 127, 75, 52, 11, 90, 22, 4}, 
  {2, 50, 38, 12, 5, 28, 16, 1}, 
  {3, 73, 31, 42, 15, 48, 10, 0}, 
  {4, 199, 125, 74, 25, 111, 60, 3}, 
  {5, 3528, 1904, 1624, 590, 2187, 698, 53}, 
  {6, 250, 137, 113, 37, 152, 50, 11}, 
  {7, 339, 188, 151, 56, 198, 77, 8}, 
  {8, 325, 216, 109, 54, 181, 80, 10}, 
  {9, 296, 188, 108, 33, 170, 87, 6}, 

  {1, 125, 75, 50, 11, 88, 21, 5}, 
  {2, 42, 29, 13, 5, 23, 13, 1}, 
  {3, 71, 32, 39, 13, 47, 11, 0}, 
  {4, 209, 133, 76, 29, 117, 59, 4}, 
  {5, 3527, 1888, 1639, 578, 2202, 692, 55}, 
  {6, 248, 140, 108, 34, 154, 50, 10}, 
  {7, 352, 198, 154, 48, 212, 83, 9}, 
  {8, 328, 216, 112, 57, 183, 78, 10}, 
  {9, 320, 199, 121, 36, 193, 84, 7}, 

  {1, 140, 81, 59, 15, 93, 28, 4}, 
  {2, 54, 40, 14, 4, 30, 19, 1}, 
  {3, 67, 29, 38, 16, 40, 11, 0}, 
  {4, 193, 122, 71, 29, 108, 52, 4}, 
  {5, 3537, 1904, 1633, 547, 2223, 707, 60}, 
  {6, 257, 146, 111, 33, 150, 62, 12}, 
  {7, 363, 203, 160, 65, 201, 86, 11}, 
  {8, 309, 206, 103, 53, 176, 70, 10}, 
  {9, 330, 206, 124, 44, 199, 78, 9}, 

  {1, 143, 83, 60, 19, 93, 28, 3}, 
  {2, 54, 40, 14, 9, 25, 17, 3}, 
  {3, 78, 34, 44, 21, 44, 13, 0}, 
  {4, 203, 125, 78, 29, 116, 53, 5}, 
  {5, 3536, 1899, 1637, 553, 2226, 696, 61}, 
  {6, 242, 138, 104, 33, 135, 62, 12}, 
  {7, 367, 209, 158, 63, 203, 90, 11}, 
  {8, 330, 221, 109, 59, 194, 66, 11}, 
  {9, 345, 216, 129, 40, 224, 72, 9}, 

  {1, 148, 86, 62, 22, 93, 30, 3}, 
  {2, 57, 41, 16, 8, 32, 15, 2}, 
  {3, 80, 38, 42, 23, 42, 15, 0}, 
  {4, 209, 126, 83, 25, 122, 57, 5}, 
  {5, 3691, 2001, 1690, 572, 2326, 737, 56}, 
  {6, 263, 158, 105, 38, 143, 67, 15}, 
  {7, 365, 215, 150, 56, 220, 80, 9}, 
  {8, 335, 219, 116, 57, 193, 75, 10}, 
  {9, 376, 243, 133, 44, 237, 87, 8}, 

  {1, 145, 85, 60, 21, 88, 32, 4}, 
  {2, 46, 35, 11, 4, 23, 17, 2}, 
  {3, 76, 40, 36, 17, 45, 13, 1}, 
  {4, 227, 142, 85, 28, 137, 55, 7}, 
  {5, 3712, 2065, 1647, 558, 2353, 738, 63}, 
  {6, 278, 159, 119, 49, 151, 64, 14}, 
  {7, 344, 206, 138, 48, 213, 75, 8}, 
  {8, 322, 218, 104, 46, 185, 80, 11}, 
  {9, 358, 241, 117, 47, 218, 82, 11}  };

int rows = 108;
int cols = 8;
int numRegion = 9;

int selection = 0;

PFont font1;
PFont font2;
PFont font3;
PFont font4;
PFont font5;

PGraphics canvas1;
PGraphics canvas2;
PGraphics canvas3;
Spout spout1;
Spout spout2;
Spout spout3;


PImage[] regions = new PImage[9];

int totalAmount;
Dot[] dots;

void setup() {

  size(1360, 760, P3D); // 910,512 = 66% 
  smooth(8);
  textureMode(NORMAL);

  canvas1 = createGraphics(int(700/1.407), 700, P3D); //
  canvas2 = createGraphics(700, 700/2, P3D);
  canvas3 = createGraphics(700, int(700/1.407), P3D);
  spout1 = new Spout(this);
  spout2 = new Spout(this);
  spout3 = new Spout(this);
  spout1.createSender("Spout Processing");
  spout2.createSender("Spout Processing");
  spout3.createSender("Spout Processing");

  for (int i = 0; i < 9; i++) {
    regions[i] = loadImage((i+1)+".png");
  }

  totals();
  processRegion();




  myPort = new Serial(this, Serial.list()[0], 9600);
  myPort.bufferUntil('\n');


  dots = new Dot[max];
  for (int i = 0; i < max; i++) {
    dots[i] = new Dot();
  }


  font1 = loadFont("Arial-BoldItalicMT-200.vlw");
  font2 = loadFont("ArialMT-200.vlw");
  font3 = loadFont("Monospaced.plain-48.vlw");
  font4 = loadFont("FuturistFixedWidth_Regular-50.vlw");
  font5 = loadFont("LouisGeorgeCafeLight-25.vlw");
}

void draw() {
  //background(palette[4]);
  background(0);

  canvas1();
  canvas2();
  canvas3();

  spout1.sendTexture(canvas1);
  spout2.sendTexture(canvas2);
  spout3.sendTexture(canvas3);


  //image(canvas3, 0, 0);
  image(canvas1, 0, 0);
}